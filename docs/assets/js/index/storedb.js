class StoreDatabaseAPI{constructor(){this.db={}}loadData(){var e=this;return new Promise((function(r,t){var s=new Worker("assets/js/index/workers/store-worker.js");s.onmessage=function(t){s.terminate(),e.db=t.data,r(t.data)},s.onerror=function(e){s.terminate(),t(e)},s.postMessage(null)}))}getAppsByCategory(e){if(e in this.db.categories)return this.db.apps.categorical[e];throw new TypeError('Category "'+e+'" does not exist!')}sortApps(e,r){return new Promise((function(t,s){var o=new Worker("assets/js/index/workers/sort-worker.js");switch(o.onmessage=function(e){o.terminate(),t(e.data.apps)},o.onerror=function(e){o.terminate(),s(e)},r){case"alphabetical":case"popularity":case"categorical":o.postMessage({apps:e,sort:r});break;default:console.warn("[StoreDb] Unable to sort, returning unsorted apps."),t(e)}}))}dlCountApp(e){return new Promise((function(r,t){var s=new Worker("assets/js/index/workers/ratings-worker.js");s.onmessage=function(){s.terminate(),r()},s.onerror=function(){s.terminate(),t()},s.postMessage({cmd:"count",slug:e})}))}}